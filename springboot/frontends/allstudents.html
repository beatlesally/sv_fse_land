<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="./bootstrap/bootstrap.min.css">
    
    <title>Document</title>
</head>
<body>
    <div class="container-fluid">
        <h1>Studierende-Liste</h1>
        <hr class="border-2 border-top border-info">
        <a href="insertstudent.html" class="btn btn-info" role="button">Studierenden hinzuf端gen</a>
        <hr class="border-2 border-top border-info">
        <table class="table" id="studentTable"></table>
    </div>
    
</body>

<script>

getAllData();

async function getAllData() //asynchron
{
    try {
        const response = await fetch('http://localhost:8080/api/v1/studenten', 
        {
            method: 'GET',
            cache : 'no-cache',
            header: {
                'Accept':'application/json'
            }
        }
        )

        const data = await response.json()

        const table = document.getElementById('studentTable')
        while(table.rows[0]) table.deleteRows(0)

        var row = table.insertRow() //Zeile einf端gen
        var id = row.insertCell(0) //in Zeile Zelle einf端gen
        var name = row.insertCell(1)
        var plz = row.insertCell(2)
        var action = row.insertCell(3)

        id.innerHTML = 'ID' //in Zelle HTML einf端gen
        name.innerHTML = 'Name'
        plz.innerHTML = 'PLZ'
        action.innerHTML = ''

        data.forEach((student) => 
        {
            var row = table.insertRow()
            var id = row.insertCell(0)
            var name = row.insertCell(1)
            var plz = row.insertCell(2)
            var action = row.insertCell(3)

            id.innerHTML = student.id
            name.innerHTML = student.name
            plz.innerHTML = student.plz
            action.innerHTML = ''
        })
        console.log(data)
    } catch(exception) {
        const table = document.getElementById('studentTable')
        table.innerHTML = "Studentendaten konnten nicht geladen werden"
    }

}
</script>

</html>